" vi:syntax=vim

" Plugins -------------------------------------------------------------

" install vim plug if not installed
if has('nvim')
  if empty(glob('~/.local/share/nvim/site/autoload/plug.vim'))
    silent !echo '[Downloading vim-plug for neovim] ...'
    silent !curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs 
      \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
  endif
else
  if empty(glob('~/.vim/autoload/plug.vim'))
    silent !echo '[Downloading vim-plug for vim] ...'
    silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs 
      \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
  endif
endif


" Load plugins {{{
call plug#begin('~/.vim/plugged')
"
"Plug 'SirVer/ultisnips'
"Plug 'Townk/vim-autoclose'
"Plug 'benmills/vimux'
"Plug 'gerw/vim-latex-suite', { 'for': 'tex' }
"Plug 'honza/vim-snippets'
"Plug 'lervag/vimtex'
"Plug 'scrooloose/syntastic'
"Plug 'valloric/youcompleteme'
"Plug 'xuhdev/vim-latex-live-preview', { 'for': 'tex' }
"neomake replaces syntastic
"Plug 'bling/vim-airline'
"Plug 'flazz/vim-colorschemes'
Plug 'airblade/vim-gitgutter'
Plug 'arcticicestudio/nord-vim'
Plug 'chiel92/vim-autoformat'
Plug 'christoomey/vim-tmux-navigator'
Plug 'dhruvasagar/vim-table-mode'
Plug 'easymotion/vim-easymotion'
Plug 'ervandew/supertab'
Plug 'godlygeek/tabular'
Plug 'junegunn/vim-easy-align'
Plug 'kien/rainbow_parentheses.vim'
Plug 'majutsushi/tagbar'
Plug 'mattn/gist-vim' "https://github.com/mattn/gist-vim
Plug 'mattn/webapi-vim'
Plug 'mbbill/undotree'
Plug 'neomake/neomake'
Plug 'ryanoasis/vim-devicons'
Plug 'scrooloose/nerdcommenter'
Plug 'scrooloose/nerdtree'
Plug 'sheerun/vim-polyglot'
Plug 'terryma/vim-multiple-cursors'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-surround'
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
call plug#end()
" }}}

colorscheme nord

" plugin variables  {{{
" detect filetype from the filename for gist
let g:gist_detect_filetype = 1
" disable autclose
let g:autoclose_on = 0
" disable polyglot latex
let g:polyglot_disabled = ['latex']
" set vimtex pdf viewer
let g:vimtex_view_method = 'zathura'
" open neomake automatically
"let g:neomake_open_list = 2
" When writing a buffer call neomake


"call neomake#configure#automake('w')
" }}}


"  pluap <F3> :Autoformat<CR>
"easy align
" https://vimawesome.com/plugin/vim-easy-align
" Start interactive EasyAlign in visual mode (e.g. vipga)
xmap ga <Plug>(EasyAlign)
" Start interactive EasyAlign for a motion/text object (e.g. g
"Open nerd tree
map <A-t> :NERDTreeToggle<CR>
" Open automatically nerdtree if no file is open
autocmd StdinReadPre * let s:std_in=1
"autocmd VimEnter * if argc() == 0 && !exists("s:std_in") | NERDTree | endif

" undotree
nnoremap <F5> :UndotreeToggle<cr>

" Turn tags
nmap <F8> :TagbarToggle<CR>

" }}}


au VimEnter * RainbowParenthesesToggle
au Syntax * RainbowParenthesesLoadRound
au Syntax * RainbowParenthesesLoadSquare
au Syntax * RainbowParenthesesLoadBraces


"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" => Plugin Configuration
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

" en" jump to de" }}}


" syntastic {{{
" set statusline+=%#warningmsg#
" set statusline+=%{SyntasticStatuslineFlag()}
" set statusline+=%*
"
" let g:syntastic_always_populate_loc_list = 1
" let g:syntastic_auto_loc_list = 1
" let g:syntastic_check_on_open = 1
" let g:syntastic_check_on_wq = 0
" }}}

" Rust {{{
"let g:rustfmt_autosave = 1
"set hidden
"let g:racer_cmd = "~/.cargo/bin"
"let g:racer_experimental_completer = 1
""let g:ycm_rust_src_path = "~/.appsc/rust-master/src/"
"set statusline+=%#warningmsg#
"set statusline+=%{SyntasticStatuslineFlag()}
"set statusline+=%*
"
"let g:syntastic_always_populate_loc_list = 1
"let g:syntastic_auto_loc_list = 1
"let g:syntastic_check_on_open = 1
"let g:syntastic_check_on_wq = 0
" }}}
"  " Airline.vim {{{
augroup airline_config
  autocmd!
  let g:airline_theme='nord'
  let g:airline_powerline_fonts = 1
  let g:airline_enable_syntastic = 1
  let g:airline#extensions#tabline#buffer_nr_format = '%s '
  let g:airline#extensions#tabline#buffer_nr_show = 1
  let g:airline#extensions#tabline#enabled = 1
  let g:airline#extensions#tabline#fnamecollapse = 0
  let g:airline#extensions#tabline#fnamemod = ':t'
augroup END
" }}}

" latex {{{
set grepprg=grep\ -nH\ $*
let g:tex_flavor='latex'
" }}}

